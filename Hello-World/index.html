<!DOCTYPE html>
<html>
  <head>
    <title>You're up and running! – Smukov on Salesforce – Ideas and experiences of a Salesforce Developer</title>

        <meta charset="utf-8" />
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0'>

    
    <meta name="description" content="Next you can update your site name, avatar and other options using the _config.yml file in the root of your repository (shown below).

" />
    <meta property="og:description" content="Next you can update your site name, avatar and other options using the _config.yml file in the root of your repository (shown below).

" />
    
    <meta name="author" content="Smukov on Salesforce" />

    
    <meta property="og:title" content="You're up and running!" />
    <meta property="twitter:title" content="You're up and running!" />
    

    <!--[if lt IE 9]>
      <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
	<link href="/css/syntax.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="alternate" type="application/rss+xml" title="Smukov on Salesforce - Ideas and experiences of a Salesforce Developer" href="/feed.xml" />
    <script src="//code.jquery.com/jquery-1.12.0.min.js"></script>
    <script src="//code.jquery.com/jquery-migrate-1.2.1.min.js"></script>

    <!-- Created with Jekyll Now - http://github.com/barryclark/jekyll-now -->
  </head>

  <body>
    <div class="wrapper-masthead">
      <div class="container">
        <header class="masthead clearfix">
          <a href="/" class="site-avatar"><img src="/images/site-logo-2.png" style="margin-top: 2px;"/></a>

          <div class="site-info">
            <h1 class="site-name"><a href="/">Smukov on Salesforce</a></h1>
            <p class="site-description">Ideas and experiences of a Salesforce Developer</p>
          </div>

          <nav>
            <a href="/">Blog</a>
            <a href="/about">About</a>
          </nav>
        </header>
      </div>
    </div>

    <div id="main" role="main" class="container">
      <article class="post">
  <h1>You're up and running!</h1>

  <div class="entry">
    <p>Next you can update your site name, avatar and other options using the _config.yml file in the root of your repository (shown below).</p>

<p><img src="/images/config.png" alt="_config.yml" /></p>

<p>The easiest way to make your first post is to edit this one. Go into /_posts/ and update the Hello World markdown file. For more instructions head over to the <a href="https://github.com/barryclark/jekyll-now">Jekyll Now repository</a> on GitHub.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">CapexFormController</span> <span class="o">{</span>

   <span class="kd">public</span> <span class="n">Id</span> <span class="n">dummy_contactId</span> <span class="o">{</span><span class="n">get</span><span class="o">;</span><span class="n">set</span><span class="o">;}</span>
   <span class="kd">public</span> <span class="n">String</span> <span class="n">returnUrl</span> <span class="o">{</span><span class="n">get</span><span class="o">;</span><span class="n">set</span><span class="o">;}</span>

   <span class="kd">public</span> <span class="n">CapexFormController</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">User</span> <span class="n">tmp_u</span> <span class="o">=</span> <span class="o">[</span><span class="n">select</span> <span class="n">id</span><span class="o">,</span> <span class="n">Contact_Id__c</span> <span class="n">from</span> <span class="n">User</span> <span class="n">where</span> <span class="n">id</span> <span class="o">=</span> <span class="o">:</span><span class="n">UserInfo</span><span class="o">.</span><span class="na">getUserId</span><span class="o">()</span> <span class="n">limit</span> <span class="mi">1</span><span class="o">];</span>
        <span class="n">system</span><span class="o">.</span><span class="na">debug</span><span class="o">(</span><span class="err">'</span><span class="n">ms</span> <span class="o">-&gt;</span> <span class="n">contact</span> <span class="n">Id</span> <span class="err">'</span> <span class="o">+</span> <span class="n">tmp_u</span><span class="o">);</span>
        <span class="n">dummy_contactId</span> <span class="o">=</span> <span class="n">tmp_u</span><span class="o">.</span><span class="na">Contact_Id__c</span><span class="o">;</span>

        <span class="n">System</span><span class="o">.</span><span class="na">debug</span><span class="o">(</span><span class="err">'</span><span class="n">ms</span> <span class="n">previous</span> <span class="n">page</span> <span class="o">-&gt;</span><span class="err">'</span> <span class="o">+</span> <span class="n">ApexPages</span><span class="o">.</span><span class="na">currentPage</span><span class="o">().</span><span class="na">getParameters</span><span class="o">().</span><span class="na">get</span><span class="o">(</span><span class="err">'</span><span class="n">retURL</span><span class="err">'</span><span class="o">));</span>

        <span class="n">returnUrl</span> <span class="o">=</span> <span class="err">'</span><span class="nl">https:</span><span class="c1">//ap4.salesforce.com/home/home.jsp';</span>

        <span class="k">if</span><span class="o">(</span><span class="n">CapexFormController</span><span class="o">.</span><span class="na">isSF1</span><span class="o">()</span> <span class="o">==</span> <span class="kc">false</span><span class="o">)</span>
        <span class="o">{</span>
            <span class="n">String</span> <span class="n">retUrl</span> <span class="o">=</span> <span class="n">ApexPages</span><span class="o">.</span><span class="na">currentPage</span><span class="o">().</span><span class="na">getParameters</span><span class="o">().</span><span class="na">get</span><span class="o">(</span><span class="err">'</span><span class="n">retURL</span><span class="err">'</span><span class="o">);</span>

            <span class="k">if</span><span class="o">(</span><span class="n">retUrl</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span>
            <span class="o">{</span>
                <span class="n">returnUrl</span> <span class="o">=</span> <span class="n">retUrl</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span>

        <span class="n">System</span><span class="o">.</span><span class="na">debug</span><span class="o">(</span><span class="err">'</span><span class="n">ms</span> <span class="n">returnUrl</span> <span class="o">-&gt;</span><span class="err">'</span> <span class="o">+</span> <span class="n">returnUrl</span><span class="o">);</span>
   <span class="o">}</span>


   <span class="nd">@RemoteAction</span>
   <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="n">submitForApproval</span><span class="o">(</span><span class="n">String</span> <span class="n">capexRequestJSON</span><span class="o">,</span> <span class="n">String</span> <span class="n">requestItemsJSON</span><span class="o">,</span> <span class="n">String</span> <span class="n">sumJSON</span><span class="o">)</span>
   <span class="o">{</span>
       <span class="n">CAPEX_Request__c</span> <span class="n">capexRequest</span> <span class="o">=</span> <span class="o">(</span><span class="n">CAPEX_Request__c</span><span class="o">)</span> <span class="n">JSON</span><span class="o">.</span><span class="na">deserialize</span><span class="o">(</span><span class="n">capexRequestJSON</span><span class="o">,</span> <span class="n">CAPEX_Request__c</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
       <span class="n">List</span><span class="o">&lt;</span><span class="n">CapexRequestItemsWrapper</span><span class="o">&gt;</span> <span class="n">requestItems</span> <span class="o">=</span> <span class="o">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">CapexRequestItemsWrapper</span><span class="o">&gt;)</span> <span class="n">JSON</span><span class="o">.</span><span class="na">deserialize</span><span class="o">(</span><span class="n">requestItemsJSON</span><span class="o">,</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">CapexRequestItemsWrapper</span><span class="o">&gt;.</span><span class="na">class</span><span class="o">);</span>
       <span class="n">Decimal</span> <span class="n">requestSum</span> <span class="o">=</span> <span class="o">(</span><span class="n">Decimal</span><span class="o">)</span> <span class="n">JSON</span><span class="o">.</span><span class="na">deserialize</span><span class="o">(</span><span class="n">sumJSON</span><span class="o">,</span> <span class="n">Decimal</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>

       <span class="n">System</span><span class="o">.</span><span class="na">debug</span><span class="o">(</span><span class="err">'</span><span class="n">ms</span><span class="o">-&gt;</span> <span class="err">'</span> <span class="o">+</span><span class="n">requestItems</span><span class="o">.</span><span class="na">size</span><span class="o">());</span>

       <span class="n">capexRequest</span><span class="o">.</span><span class="na">CurrencyIsoCode</span> <span class="o">=</span> <span class="n">capexRequest</span><span class="o">.</span><span class="na">Currency__c</span><span class="o">;</span>

       <span class="c1">// Create a database savepoint before inserts</span>
       <span class="n">Savepoint</span> <span class="n">sp</span> <span class="o">=</span> <span class="n">Database</span><span class="o">.</span><span class="na">setSavepoint</span><span class="o">();</span>

       <span class="k">try</span><span class="o">{</span>
           <span class="n">insert</span> <span class="n">capexRequest</span><span class="o">;</span>

           <span class="n">System</span><span class="o">.</span><span class="na">debug</span><span class="o">(</span><span class="err">'</span><span class="n">ms</span><span class="o">-&gt;</span> <span class="n">calling</span> <span class="n">insert</span> <span class="n">request</span> <span class="n">items</span><span class="err">'</span><span class="o">);</span>
           <span class="c1">//insert the request items</span>
           <span class="n">CapexFormController</span><span class="o">.</span><span class="na">insertRequestItems</span><span class="o">(</span><span class="n">capexRequest</span><span class="o">.</span><span class="na">Id</span><span class="o">,</span> <span class="n">capexRequest</span><span class="o">.</span><span class="na">Currency__c</span><span class="o">,</span> <span class="n">requestItems</span><span class="o">);</span>

           <span class="n">System</span><span class="o">.</span><span class="na">debug</span><span class="o">(</span><span class="err">'</span><span class="n">ms</span><span class="o">-&gt;</span> <span class="n">returning</span> <span class="n">from</span> <span class="n">insert</span> <span class="n">request</span> <span class="n">items</span><span class="err">'</span><span class="o">);</span>

           <span class="n">System</span><span class="o">.</span><span class="na">debug</span><span class="o">(</span><span class="err">'</span><span class="n">ms</span><span class="o">-&gt;</span> <span class="n">createCase</span><span class="err">'</span><span class="o">);</span>
           <span class="n">CapexFormController</span><span class="o">.</span><span class="na">createCase</span><span class="o">(</span><span class="n">capexRequest</span><span class="o">,</span> <span class="n">requestSum</span><span class="o">);</span>
           <span class="n">System</span><span class="o">.</span><span class="na">debug</span><span class="o">(</span><span class="err">'</span><span class="n">ms</span><span class="o">-&gt;</span> <span class="n">returning</span> <span class="n">from</span> <span class="n">createCase</span><span class="err">'</span><span class="o">);</span>

       <span class="o">}</span><span class="k">catch</span><span class="o">(</span><span class="n">DmlException</span> <span class="n">e</span><span class="o">){</span>
           <span class="c1">//an exception has occurred, roll back the database</span>
           <span class="n">Database</span><span class="o">.</span><span class="na">rollback</span><span class="o">(</span><span class="n">sp</span><span class="o">);</span>


           <span class="n">System</span><span class="o">.</span><span class="na">debug</span><span class="o">(</span><span class="err">'</span><span class="n">ms</span><span class="o">-&gt;</span> <span class="err">'</span><span class="o">+</span><span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
           <span class="n">System</span><span class="o">.</span><span class="na">debug</span><span class="o">(</span><span class="n">e</span><span class="o">);</span>
       <span class="o">}</span>
   <span class="o">}</span>
 <span class="o">}</span></code></pre></figure>


  </div>

  <div class="date">
    Written on March  3, 2014
  </div>

  
<div class="comments">
	<div id="disqus_thread"></div>
	<script type="text/javascript">

	    var disqus_shortname = 'smukovgithubio';

	    (function() {
	        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
	        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	    })();

	</script>
	<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>

</article>

    </div>

    <div class="wrapper-footer">
      <div class="container">
        <footer class="footer">
          
<a href="mailto:smukov@gmail.com"><i class="svg-icon email"></i></a>


<a href="https://github.com/smukov/smukov.github.io"><i class="svg-icon github"></i></a>

<a href="https://www.linkedin.com/in/smukov"><i class="svg-icon linkedin"></i></a>

<a href="/feed.xml"><i class="svg-icon rss"></i></a>
<a href="https://www.twitter.com/MiroslavSmukov"><i class="svg-icon twitter"></i></a>



        </footer>
      </div>
    </div>

    
	<!-- Google Analytics -->
	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

		ga('create', 'UA-74717134-1', 'auto');
		ga('send', 'pageview', {
		  'page': '/Hello-World/',
		  'title': 'You\'re up and running!'
		});
	</script>
	<!-- End Google Analytics -->


  </body>
</html>
