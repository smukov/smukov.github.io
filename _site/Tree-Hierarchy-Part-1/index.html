<!DOCTYPE html>
<html>
  <head>
    <title>Tree Hierarchy - Part 1 – Smukov on Salesforce – Ideas and experiences of a Salesforce Developer</title>

        <meta charset="utf-8" />
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0'>

    
    <meta name="description" content="I’m creating a series that will show you how I created a custom tree hierarchy with generic components that are easily
reusable and allow you to create a hierarchy of various objects using different criteria and custom groupings.

" />
    <meta property="og:description" content="I’m creating a series that will show you how I created a custom tree hierarchy with generic components that are easily
reusable and allow you to create a hierarchy of various objects using different criteria and custom groupings.

" />
    
    <meta name="author" content="Smukov on Salesforce" />

    
    <meta property="og:title" content="Tree Hierarchy - Part 1" />
    <meta property="twitter:title" content="Tree Hierarchy - Part 1" />
    

    <!--[if lt IE 9]>
      <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
	<link href="/css/syntax.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="alternate" type="application/rss+xml" title="Smukov on Salesforce - Ideas and experiences of a Salesforce Developer" href="/feed.xml" />
    <script src="//code.jquery.com/jquery-1.12.0.min.js"></script>
    <script src="//code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css"/>

    <!-- Created with Jekyll Now - http://github.com/barryclark/jekyll-now -->
  </head>

  <body>
    <div class="wrapper-masthead">
      <div class="container">
        <header class="masthead clearfix">
          <a href="/" class="site-avatar"><img src="/images/site-logo-2.png" style="margin-top: 2px;"/></a>

          <div class="site-info">
            <h1 class="site-name"><a href="/">Smukov on Salesforce</a></h1>
            <p class="site-description">Ideas and experiences of a Salesforce Developer</p>
          </div>

          <nav>
            <a href="/">Blog</a>
            <a href="/about">About</a>
          </nav>
        </header>
      </div>
    </div>

    <div id="main" role="main" class="container">
      <article class="post">
  <h1>Tree Hierarchy - Part 1</h1>

  <div class="entry">
    <p>I’m creating a series that will show you how I created a custom tree hierarchy with generic components that are easily
reusable and allow you to create a hierarchy of various objects using different criteria and custom groupings.</p>

<h3 id="technologies-used">Technologies used</h3>

<p>For this mini-project I used a set of <code class="highlighter-rouge">Apex</code> classes to build my hierarchy structure from Salesforce Records. I tried to make these classes
as generic as I could so that I can easily reuse them to create a different hierarchy tree, as I know that this is often a requirement in my company.</p>

<p>I used a single <code class="highlighter-rouge">Visualforce Component</code> that is recursively building a tree using <code class="highlighter-rouge">AngularJS</code>. A good thing about <code class="highlighter-rouge">Visualforce Component</code> is that you can easily re-use it anywhere by only passing different arguments or collections to be rendered. You can even use the same component multiple times within a single <code class="highlighter-rouge">Visualforce</code> page in order to show multiple trees, which was a requirement that I had.</p>

<h3 id="why-angularjs">Why AngularJS?</h3>

<p><code class="highlighter-rouge">Visualforce Components</code> cannot call themselves recursively, and since I’m building a tree I needed a way to recursively go through code and <code class="highlighter-rouge">AngularJS</code> gave me this ability. I defined an <code class="highlighter-rouge">ng-template</code> that serves as a <code class="highlighter-rouge">tree node</code>. I’m then using the <code class="highlighter-rouge">ngRepeat</code> and <code class="highlighter-rouge">ngInclude</code> directives to iterate over the <code class="highlighter-rouge">ng-template</code> recursively and construct my tree hierarchy in the <code class="highlighter-rouge">DOM</code>.</p>

<h3 id="class-hierarchy">Class Hierarchy</h3>

<p><a href="/images/3-2016/19/TreeHierarchy.png" target="_blank"><img src="/images/3-2016/19/TreeHierarchy.png" alt="Class Hierarchy" /></a></p>

<p>A quick explanation of the class hierarchy above:</p>

<ul>
  <li><strong>ObjectHierarchyWrapper</strong> - a wrapper class to store record details that I’m showing as a <code class="highlighter-rouge">tree node</code> later on. I’m also storing all
the child nodes as <code class="highlighter-rouge">Map&lt;Id, ObjectHierarchyWrapper&gt; ChildRecords</code> within this class.</li>
  <li><strong>ObjectHierarchyBuilder</strong> - an abstract class that contains the main logic required to create a hierarchy out of a set of <code class="highlighter-rouge">Salesforce Records</code>.
    <ul>
      <li><strong>wrapRecord</strong> - an abstract method that provides a custom wrapping mechanism for records. You will see later on that my code could have done without this method, but, in my opinion, leaving it in code will provide great flexibility for future extensions. I could be wrong, so I’ll be glad to hear your opinion in comments.</li>
      <li><strong>evaluateParent</strong> - this is an abstract method that must be implemented in a child class in order to provide a correct logic that evaluates what makes one record a <code class="highlighter-rouge">parent</code> of another. This is required as different types of records are using different fields for this purpose.</li>
    </ul>
  </li>
  <li><strong>OrderLineObjectHierarchyBuilder</strong> and <strong>OrderLineByPremiseHierarchyBuilder</strong> - these are two concrete implementations of the <code class="highlighter-rouge">ObjectHierarchyBuilder</code> class that contain custom logic that extends the initial class. Both of these classes are creating specific hierarchies that are grouped in a different way.</li>
</ul>

<h3 id="visualforce-hierarchy">Visualforce Hierarchy</h3>

<p><a href="/images/3-2016/19/VF_TreeHierarchy.png" target="_blank"><img src="/images/3-2016/19/VF_TreeHierarchy.png" alt="Visualforce Hierarchy" /></a></p>

<p>Above you can see that our final <code class="highlighter-rouge">Visualforce Page</code> will contain 1 or more <code class="highlighter-rouge">GenericHierarchyComponents</code>, and each component will represent a different tree. In my case I will display 2 hierarchies side by side. I’ve also listed the parameters that the component will take. I’ll explain those parameters later on when I get to explaining the component in detail.</p>

<h3 id="end-product">End product</h3>

<p><a href="/images/3-2016/19/final_hierarchy.png" target="_blank"><img src="/images/3-2016/19/final_hierarchy.png" alt="Final Hierarchy" /></a></p>

<p>In the image above you can see what will be the final end product of this post series (you can click on an image to see it larger).</p>

<h3 id="conclusion">Conclusion</h3>

<p>This was just a quick overivew of the whole setup that I’ll cover in great details over the coming weeks. Stay tuned for more.</p>

  </div>

  <div class="date">
    Written on March 19, 2016
  </div>

  <div class="share-page">
    Share this </br> </br>
    <a href="http://www.linkedin.com/shareArticle?mini=true&url=http://smukov.github.io/Tree-Hierarchy-Part-1/&title=Tree Hierarchy - Part 1&source=http://smukov.github.io" rel="nofollow" target="_blank" title="Share on LinkedIn">
        <i class="fa fa-linkedin fa-2x" style="color:#0077B5"></i>
    </a>
    <a href="https://twitter.com/intent/tweet?text=Tree Hierarchy - Part 1&url=http://smukov.github.io/Tree-Hierarchy-Part-1/&via=&related=" rel="nofollow" target="_blank" title="Share on Twitter">
        <i class="fa fa-twitter fa-2x" style="color:#55acee"></i>
    </a>
    <a href="https://facebook.com/sharer.php?u=http://smukov.github.io/Tree-Hierarchy-Part-1/" rel="nofollow" target="_blank" title="Share on Facebook">
        <i class="fa fa-facebook fa-2x" style="color:#3b5998"></i>
    </a>
    <a href="https://plus.google.com/share?url=http://smukov.github.io/Tree-Hierarchy-Part-1/" rel="nofollow" target="_blank" title="Share on Google+">
        <i class="fa fa-google-plus fa-2x" style="color:#d34836"></i>
    </a>
</div>
  

  
<div class="comments">
	<div id="disqus_thread"></div>
	<script type="text/javascript">

	    var disqus_shortname = 'smukovgithubio';

	    (function() {
	        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
	        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	    })();

	</script>
	<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>

</article>

    </div>

    <div class="wrapper-footer">
      <div class="container">
        <footer class="footer">
          
<a href="mailto:smukov@gmail.com"><i class="svg-icon email"></i></a>


<a href="https://github.com/smukov/smukov.github.io"><i class="svg-icon github"></i></a>

<a href="https://www.linkedin.com/in/smukov"><i class="svg-icon linkedin"></i></a>

<a href="/feed.xml"><i class="svg-icon rss"></i></a>
<a href="https://www.twitter.com/MiroslavSmukov"><i class="svg-icon twitter"></i></a>



        </footer>
      </div>
    </div>

    
	<!-- Google Analytics -->
	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

		ga('create', 'UA-74717134-1', 'auto');
		ga('send', 'pageview', {
		  'page': '/Tree-Hierarchy-Part-1/',
		  'title': 'Tree Hierarchy - Part 1'
		});
	</script>
	<!-- End Google Analytics -->


  </body>
</html>
